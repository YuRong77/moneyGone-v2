import{d as C,c as E,o as i,l as w,w as m,b as r,e as u,n as A,a as h,j as R,F as D,u as n,q as y,E as F,_ as U,r as p,s as z,g as P,h as x,i as T,v as q,x as I,k as L,y as O,z as j,A as B,t as M}from"./index-DjT0qCA7.js";import{E as H,r as G}from"./right-_u405He3.js";import{_ as J,p as K}from"./RecordItem-Bx8wI1tg.js";import{_ as Q}from"./Header-CQqbSkcB.js";import{s as W,e as X,a as Y,_ as Z}from"./search-46k-zBIZ.js";const ee=C({__name:"RecordDrawer",props:{isVisible:Boolean,rowDetails:{type:Array,required:!0}},emits:["update:isVisible"],setup(b,{emit:l}){const _=b,c=l,s=E({get:()=>_.isVisible,set:o=>c("update:isVisible",o)});return(o,d)=>{const f=J,V=F,v=H;return i(),w(v,{modelValue:n(s),"onUpdate:modelValue":d[1]||(d[1]=e=>y(s)?s.value=e:null),title:"詳情",direction:"btt",size:"90%"},{footer:m(()=>[r("div",null,[u(V,{plain:"",class:"mainBtn",onClick:d[0]||(d[0]=e=>c("update:isVisible",!1))},{default:m(()=>[A("cancel")]),_:1})])]),default:m(()=>[(i(!0),h(D,null,R(b.rowDetails,e=>(i(),w(f,{key:e.id,item:e},null,8,["item"]))),128))]),_:1},8,["modelValue"])}}}),te=U(ee,[["__scopeId","data-v-a8632994"]]),ae={class:"content"},se=["onClick"],oe={class:"info"},ne={class:"date"},le={class:"amount"},re=C({__name:"Index",setup(b){let l=p(new Date);const _=p([]);let c=p(null),s=p(!1),o=p("");const d=E(()=>o.value?_.value.filter(e=>e.details.find(t=>t.categoryName.includes(o.value)||t.name.includes(o.value))):_.value);z(l,()=>{v()},{immediate:!0});function f(e){return e.details.reduce((t,g)=>g.amount>t.amount?g:t,e.details[0])}function V(e){c.value=e,s.value=!0}function v(){const e={startDate:I(W(l.value),"yyyy-MM-dd"),endDate:I(X(l.value),"yyyy-MM-dd")};L.transactionTotalList(e).then(t=>{_.value=t}).catch(t=>{}).finally(()=>{s.value=!1})}return P(()=>{x.on("refresh",v)}),T(()=>{x.off("refresh")}),(e,t)=>{const g=Z,N=Q,k=O("inline-svg"),S=j,$=te;return i(),h(D,null,[u(N,{title:"Record"},{right:m(()=>[u(g,{date:n(l),"onUpdate:date":t[0]||(t[0]=a=>y(l)?l.value=a:l=a),type:"month"},null,8,["date"])]),_:1}),r("div",ae,[u(S,{class:"search cardShadow mb-5",modelValue:n(o),"onUpdate:modelValue":t[1]||(t[1]=a=>y(o)?o.value=a:o=a),placeholder:"Please Input"},{prefix:m(()=>[u(k,{src:n(Y),height:"18",width:"18"},null,8,["src"])]),_:1},8,["modelValue"]),(i(!0),h(D,null,R(n(d),a=>(i(),h("div",{class:"totalItem cardShadow",key:a.date,onClick:ie=>V(a.details)},[r("div",oe,[r("div",{class:"iconBox",style:B({background:`${f(a).categoryColor}`})},[r("div",{class:"icon",style:B({backgroundImage:`url(${f(a).imageUrl})`})},null,4)],4),r("div",null,[r("div",ne,M(a.date),1),r("div",le,"$ "+M(n(K)(a.totalAmount)),1)])]),u(k,{src:n(G),color:"#ababab",height:"18",width:"18"},null,8,["src"])],8,se))),128))]),n(c)?(i(),w($,{key:0,isVisible:n(s),"onUpdate:isVisible":t[2]||(t[2]=a=>y(s)?s.value=a:s=a),rowDetails:n(c)},null,8,["isVisible","rowDetails"])):q("",!0)],64)}}}),me=U(re,[["__scopeId","data-v-a0ab83c7"]]);export{me as default};
