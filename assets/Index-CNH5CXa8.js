import{n as I,d as C,c as S,o as d,l as V,w as f,b as l,e as m,q as $,a as h,j as E,F as b,u as s,s as w,E as N,_ as R,r as p,v as z,g as H,h as x,i as P,x as T,y as k,k as q,z as L,A as O,B as M,t as B}from"./index-BxcN3km0.js";import{E as Y}from"./el-drawer-XHWIfbWA.js";import{_ as j,p as G}from"./RecordItem-DOQ3nqlY.js";import{_ as J}from"./Header-DcV-kmSH.js";import{_ as K}from"./DatePicker-DiyV5D_x.js";import{r as Q}from"./right-BFgIGZoU.js";import"./index-CrRSbka2.js";function W(r){const e=I(r),u=e.getMonth();return e.setFullYear(e.getFullYear(),u+1,0),e.setHours(23,59,59,999),e}function X(r){const e=I(r);return e.setDate(1),e.setHours(0,0,0,0),e}const Z=C({__name:"RecordDrawer",props:{isVisible:Boolean,rowDetails:{type:Array,required:!0}},emits:["update:isVisible"],setup(r,{emit:e}){const u=r,_=e,n=S({get:()=>u.isVisible,set:i=>_("update:isVisible",i)});return(i,c)=>{const y=j,v=N,a=Y;return d(),V(a,{modelValue:s(n),"onUpdate:modelValue":c[1]||(c[1]=t=>w(n)?n.value=t:null),title:"詳情",direction:"btt",size:"90%"},{footer:f(()=>[l("div",null,[m(v,{plain:"",class:"mainBtn",onClick:c[0]||(c[0]=t=>_("update:isVisible",!1))},{default:f(()=>[$("cancel")]),_:1})])]),default:f(()=>[(d(!0),h(b,null,E(r.rowDetails,t=>(d(),V(y,{key:t.id,item:t},null,8,["item"]))),128))]),_:1},8,["modelValue"])}}}),ee=R(Z,[["__scopeId","data-v-a8632994"]]),te="data:image/svg+xml,%3csvg%20width='100'%20height='100'%20viewBox='0%200%202%202'%20xmlns='http://www.w3.org/2000/svg'%20fill='none'%3e%3cpath%20fill='currentColor'%20fill-rule='evenodd'%20d='M.906.25a.656.656%200%201%200%20.393%201.182l.291.291a.094.094%200%201%200%20.133-.133l-.291-.291A.656.656%200%200%200%20.906.25M.438.906a.469.469%200%201%201%20.938%200%20.469.469%200%200%201-.938%200'%20clip-rule='evenodd'/%3e%3c/svg%3e",oe={class:"content"},ne=["onClick"],se={class:"info"},ae={class:"date"},le={class:"amount"},re=C({__name:"Index",setup(r){let e=p(new Date);const u=p([]);let _=p(null),n=p(!1),i=p("");z(e,()=>{v()},{immediate:!0});function c(a){return a.details.reduce((t,g)=>g.amount>t.amount?g:t,a.details[0])}function y(a){_.value=a,n.value=!0}function v(){const a={startDate:k(X(e.value),"yyyy-MM-dd"),endDate:k(W(e.value),"yyyy-MM-dd")};q.transactionTotalList(a).then(t=>{u.value=t}).catch(t=>{}).finally(()=>{n.value=!1})}return H(()=>{x.on("refresh",v)}),P(()=>{x.off("refresh")}),(a,t)=>{const g=K,U=J,D=L("inline-svg"),A=O,F=ee;return d(),h(b,null,[m(U,{title:"Record"},{right:f(()=>[m(g,{date:s(e),"onUpdate:date":t[0]||(t[0]=o=>w(e)?e.value=o:e=o),type:"month"},null,8,["date"])]),_:1}),l("div",oe,[m(A,{class:"search cardShadow mb-5",modelValue:s(i),"onUpdate:modelValue":t[1]||(t[1]=o=>w(i)?i.value=o:i=o),placeholder:"Please Input"},{prefix:f(()=>[m(D,{src:s(te),height:"18",width:"18"},null,8,["src"])]),_:1},8,["modelValue"]),(d(!0),h(b,null,E(s(u),o=>(d(),h("div",{class:"totalItem cardShadow",key:o.date,onClick:ie=>y(o.details)},[l("div",se,[l("div",{class:"iconBox",style:M({background:`${c(o).categoryColor}`})},[l("div",{class:"icon",style:M({backgroundImage:`url(${c(o).imageUrl})`})},null,4)],4),l("div",null,[l("div",ae,B(o.date),1),l("div",le,"$ "+B(s(G)(o.totalAmount)),1)])]),m(D,{src:s(Q),color:"#ababab",height:"18",width:"18"},null,8,["src"])],8,ne))),128))]),s(_)?(d(),V(F,{key:0,isVisible:s(n),"onUpdate:isVisible":t[2]||(t[2]=o=>w(n)?n.value=o:n=o),rowDetails:s(_)},null,8,["isVisible","rowDetails"])):T("",!0)],64)}}}),ve=R(re,[["__scopeId","data-v-4a236836"]]);export{ve as default};
