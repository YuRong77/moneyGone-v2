import{d as C,c as L,o as m,a as f,b as t,t as h,u as e,e as c,w as N,p as S,f as x,_ as R,r as T,g as V,h as k,i as P,F as B,j as Q,k as I,l as U,m as j,n as q,q as z,E as A,s as D}from"./index-B7YVAiEQ.js";import{p as v,_ as G}from"./RecordItem-Dt20WxCJ.js";import{E as H}from"./el-progress-Cxy7Wznf.js";import{l as b,r as g,_ as K}from"./right-EZb9HEQ_.js";const E=s=>(S("data-v-f7fd5860"),s=s(),x(),s),M={class:"overview cardShadow"},J={class:"mb-3"},W=E(()=>t("div",{class:"label"},"今日花費",-1)),X={class:"amount"},Y=E(()=>t("div",{class:"label"},"本月花費",-1)),Z={class:"amount"},tt={class:"percent"},et={class:"over"},st=C({__name:"Overview",props:{data:{}},setup(s){const a=s,r=[{color:"#1989fa",percentage:40},{color:"#5cb87a",percentage:60},{color:"#e6a23c",percentage:80},{color:"#f56c6c",percentage:100}],i=L(()=>{if(!a.data)return{};const{monthlyTotal:l,monthlyBudget:o}=a.data,_=o-l,n=l/o*100;return{remainingBudget:_,percent:n>=100?100:n,percentStr:`${n.toFixed()}%`}});return(l,o)=>{var n,u;const _=H;return m(),f("div",M,[t("div",null,[t("div",J,[W,t("div",X,"$ "+h(e(v)((n=a.data)==null?void 0:n.dailyTotal)),1)]),t("div",null,[Y,t("div",Z,"$ "+h(e(v)((u=a.data)==null?void 0:u.monthlyTotal)),1)])]),c(_,{type:"dashboard",percentage:e(i).percent,color:r,"stroke-width":10},{default:N(({percentage:w})=>[t("div",tt,h(e(i).percentStr),1),t("div",et,"剩餘 $"+h(e(v)(e(i).remainingBudget)),1)]),_:1},8,["percentage"])])}}}),ot=R(st,[["__scopeId","data-v-f7fd5860"]]),nt=""+new URL("cashRain-BGKQwQCm.svg",import.meta.url).href,d=s=>(S("data-v-74f0a3c0"),s=s(),x(),s),at={class:"content"},ct={class:"titleBar"},rt=d(()=>t("h4",{class:"title"},"概要",-1)),it=d(()=>t("span",null,"查看圖表",-1)),lt={class:"titleBar"},dt=d(()=>t("h4",{class:"title"},"分類",-1)),_t=d(()=>t("span",null,"編輯分類",-1)),pt={class:"titleBar"},mt=d(()=>t("h4",{class:"title"},"本日花費",-1)),ut=d(()=>t("span",null,"查看紀錄",-1)),ht={class:"record"},vt=C({__name:"Index",setup(s){const a=j(),r=T();function i(){b.open(),q.transactionOverview().then(l=>{r.value=l}).catch(()=>{}).finally(()=>{b.close()})}return V(()=>{i(),k.on("refresh",i)}),P(()=>{k.off("refresh")}),(l,o)=>{var $,y;const _=K,n=z("inline-svg"),u=ot,w=D,F=G,O=A;return m(),f(B,null,[c(_,{title:"Lobby"}),t("div",at,[t("div",ct,[rt,t("div",{class:"link",onClick:o[0]||(o[0]=p=>e(a).push({name:"Chart"}))},[it,c(n,{src:e(g),color:"#8d8d8d",height:"20",width:"24"},null,8,["src"])])]),c(u,{class:"mb-10",data:e(r)},null,8,["data"]),t("div",lt,[dt,t("div",{class:"link",onClick:o[1]||(o[1]=p=>e(a).push({name:"Setting"}))},[_t,c(n,{src:e(g),color:"#8d8d8d",height:"20",width:"20"},null,8,["src"])])]),c(w,{class:"mb-10"}),t("div",pt,[mt,t("div",{class:"link",onClick:o[2]||(o[2]=p=>e(a).push({name:"Record"}))},[ut,c(n,{src:e(g),color:"#8d8d8d",height:"20",width:"24"},null,8,["src"])])]),t("div",ht,[(m(!0),f(B,null,Q(($=e(r))==null?void 0:$.todayRecords,p=>(m(),I(F,{key:p.id,item:p},null,8,["item"]))),128)),((y=e(r))==null?void 0:y.todayRecords.length)===0?(m(),I(O,{key:0,class:"cardShadow",image:e(nt),"image-size":250,description:"今天還沒有錢錢犧牲"},null,8,["image"])):U("",!0)])])],64)}}}),yt=R(vt,[["__scopeId","data-v-74f0a3c0"]]);export{yt as default};
