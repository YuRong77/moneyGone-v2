import{c as Ne,e as Qe,a9 as pt,b8 as Ae,bn as Ke,h as A,j as x,a as $,o as ee,Y as K,k as Me,E as Y,aE as _e,d as H,l as C,q as I,J as h,s as M,u as l,K as q,_ as te,aq as vt,ar as mt,as as Se,I as Ce,bo as $e,au as gt,ac as We,i as Ze,bp as bt,al as J,am as ie,ax as _t,av as yt,aw as kt,ay as Ct,bq as $t,S as wt,n as pe,p as xe,m as U,w as V,a2 as ge,a5 as qe,a3 as y,v as R,P as de,N as j,x as F,t as z,y as et,M as Ee,bf as Vt,a6 as Pe,G as tt,aB as je,A as lt,br as Mt,bs as St,bi as Et,bt as Pt,bu as Dt,a7 as Nt,Q as At,O as It,a4 as ot,r as ve,bv as Bt,aC as De,bw as Ie,bx as ye,ao as B,by as G,ap as ke,ai as Be,bz as at,bA as Lt,a1 as Ft,aj as Tt,ak as Ut}from"./index-DV1cJIPc.js";import{a as Ht,E as Rt,_ as Ot}from"./Header-Bp2haW9S.js";import{d as zt,C as Kt,r as me}from"./right-BS6q4xr2.js";import{E as Wt}from"./el-switch-DU3Fg25u.js";import"./validator-DF39urVi.js";const Le=t=>{let a,o;return t.type==="touchend"?(o=t.changedTouches[0].clientY,a=t.changedTouches[0].clientX):t.type.startsWith("touch")?(o=t.touches[0].clientY,a=t.touches[0].clientX):(o=t.clientY,a=t.clientX),{clientX:a,clientY:o}},qt=Ne({color:{type:Qe(Object),required:!0},vertical:{type:Boolean,default:!1}});let we=!1;function ue(t,a){if(!pt)return;const o=function(s){var n;(n=a.drag)==null||n.call(a,s)},e=function(s){var n;document.removeEventListener("mousemove",o),document.removeEventListener("mouseup",e),document.removeEventListener("touchmove",o),document.removeEventListener("touchend",e),document.onselectstart=null,document.ondragstart=null,we=!1,(n=a.end)==null||n.call(a,s)},r=function(s){var n;we||(s.preventDefault(),document.onselectstart=()=>!1,document.ondragstart=()=>!1,document.addEventListener("mousemove",o),document.addEventListener("mouseup",e),document.addEventListener("touchmove",o),document.addEventListener("touchend",e),we=!0,(n=a.start)==null||n.call(a,s))};t.addEventListener("mousedown",r),t.addEventListener("touchstart",r,{passive:!1})}const jt=t=>{const a=_e(),{t:o}=Ae(),e=Ke(),r=Ke(),s=A(()=>t.color.get("alpha")),n=A(()=>o("el.colorpicker.alphaLabel"));function f(p){var c;p.target!==e.value&&u(p),(c=e.value)==null||c.focus()}function u(p){if(!r.value||!e.value)return;const i=a.vnode.el.getBoundingClientRect(),{clientX:v,clientY:_}=Le(p);if(t.vertical){let m=_-i.top;m=Math.max(e.value.offsetHeight/2,m),m=Math.min(m,i.height-e.value.offsetHeight/2),t.color.set("alpha",Math.round((m-e.value.offsetHeight/2)/(i.height-e.value.offsetHeight)*100))}else{let m=v-i.left;m=Math.max(e.value.offsetWidth/2,m),m=Math.min(m,i.width-e.value.offsetWidth/2),t.color.set("alpha",Math.round((m-e.value.offsetWidth/2)/(i.width-e.value.offsetWidth)*100))}}function d(p){const{code:c,shiftKey:i}=p,v=i?10:1;switch(c){case Y.left:case Y.down:p.preventDefault(),p.stopPropagation(),k(-v);break;case Y.right:case Y.up:p.preventDefault(),p.stopPropagation(),k(v);break}}function k(p){let c=s.value+p;c=c<0?0:c>100?100:c,t.color.set("alpha",c)}return{thumb:e,bar:r,alpha:s,alphaLabel:n,handleDrag:u,handleClick:f,handleKeydown:d}},Xt=(t,{bar:a,thumb:o,handleDrag:e})=>{const r=_e(),s=x("color-alpha-slider"),n=$(0),f=$(0),u=$();function d(){if(!o.value||t.vertical)return 0;const g=r.vnode.el,w=t.color.get("alpha");return g?Math.round(w*(g.offsetWidth-o.value.offsetWidth/2)/100):0}function k(){if(!o.value)return 0;const g=r.vnode.el;if(!t.vertical)return 0;const w=t.color.get("alpha");return g?Math.round(w*(g.offsetHeight-o.value.offsetHeight/2)/100):0}function p(){if(t.color&&t.color.value){const{r:g,g:w,b:T}=t.color.toRgb();return`linear-gradient(to right, rgba(${g}, ${w}, ${T}, 0) 0%, rgba(${g}, ${w}, ${T}, 1) 100%)`}return""}function c(){n.value=d(),f.value=k(),u.value=p()}ee(()=>{if(!a.value||!o.value)return;const g={drag:w=>{e(w)},end:w=>{e(w)}};ue(a.value,g),ue(o.value,g),c()}),K(()=>t.color.get("alpha"),()=>c()),K(()=>t.color.value,()=>c());const i=A(()=>[s.b(),s.is("vertical",t.vertical)]),v=A(()=>s.e("bar")),_=A(()=>s.e("thumb")),m=A(()=>({background:u.value})),N=A(()=>({left:Me(n.value),top:Me(f.value)}));return{rootKls:i,barKls:v,barStyle:m,thumbKls:_,thumbStyle:N,update:c}},Yt="ElColorAlphaSlider",Gt=H({name:Yt}),Jt=H({...Gt,props:qt,setup(t,{expose:a}){const o=t,{alpha:e,alphaLabel:r,bar:s,thumb:n,handleDrag:f,handleClick:u,handleKeydown:d}=jt(o),{rootKls:k,barKls:p,barStyle:c,thumbKls:i,thumbStyle:v,update:_}=Xt(o,{bar:s,thumb:n,handleDrag:f});return a({update:_,bar:s,thumb:n}),(m,N)=>(C(),I("div",{class:M(l(k))},[h("div",{ref_key:"bar",ref:s,class:M(l(p)),style:q(l(c)),onClick:l(u)},null,14,["onClick"]),h("div",{ref_key:"thumb",ref:n,class:M(l(i)),style:q(l(v)),"aria-label":l(r),"aria-valuenow":l(e),"aria-orientation":m.vertical?"vertical":"horizontal","aria-valuemin":"0","aria-valuemax":"100",role:"slider",tabindex:"0",onKeydown:l(d)},null,46,["aria-label","aria-valuenow","aria-orientation","onKeydown"])],2))}});var Qt=te(Jt,[["__file","alpha-slider.vue"]]);const Zt=H({name:"ElColorHueSlider",props:{color:{type:Object,required:!0},vertical:Boolean},setup(t){const a=x("color-hue-slider"),o=_e(),e=$(),r=$(),s=$(0),n=$(0),f=A(()=>t.color.get("hue"));K(()=>f.value,()=>{c()});function u(i){i.target!==e.value&&d(i)}function d(i){if(!r.value||!e.value)return;const _=o.vnode.el.getBoundingClientRect(),{clientX:m,clientY:N}=Le(i);let g;if(t.vertical){let w=N-_.top;w=Math.min(w,_.height-e.value.offsetHeight/2),w=Math.max(e.value.offsetHeight/2,w),g=Math.round((w-e.value.offsetHeight/2)/(_.height-e.value.offsetHeight)*360)}else{let w=m-_.left;w=Math.min(w,_.width-e.value.offsetWidth/2),w=Math.max(e.value.offsetWidth/2,w),g=Math.round((w-e.value.offsetWidth/2)/(_.width-e.value.offsetWidth)*360)}t.color.set("hue",g)}function k(){if(!e.value)return 0;const i=o.vnode.el;if(t.vertical)return 0;const v=t.color.get("hue");return i?Math.round(v*(i.offsetWidth-e.value.offsetWidth/2)/360):0}function p(){if(!e.value)return 0;const i=o.vnode.el;if(!t.vertical)return 0;const v=t.color.get("hue");return i?Math.round(v*(i.offsetHeight-e.value.offsetHeight/2)/360):0}function c(){s.value=k(),n.value=p()}return ee(()=>{if(!r.value||!e.value)return;const i={drag:v=>{d(v)},end:v=>{d(v)}};ue(r.value,i),ue(e.value,i),c()}),{bar:r,thumb:e,thumbLeft:s,thumbTop:n,hueValue:f,handleClick:u,update:c,ns:a}}});function xt(t,a,o,e,r,s){return C(),I("div",{class:M([t.ns.b(),t.ns.is("vertical",t.vertical)])},[h("div",{ref:"bar",class:M(t.ns.e("bar")),onClick:t.handleClick},null,10,["onClick"]),h("div",{ref:"thumb",class:M(t.ns.e("thumb")),style:q({left:t.thumbLeft+"px",top:t.thumbTop+"px"})},null,6)],2)}var el=te(Zt,[["render",xt],["__file","hue-slider.vue"]]);const tl=Ne({modelValue:String,id:String,showAlpha:Boolean,colorFormat:String,disabled:Boolean,size:vt,popperClass:{type:String,default:""},tabindex:{type:[String,Number],default:0},teleported:Ht.teleported,predefine:{type:Qe(Array)},validateEvent:{type:Boolean,default:!0},...mt(["ariaLabel"])}),ll={[Se]:t=>Ce(t)||$e(t),[gt]:t=>Ce(t)||$e(t),activeChange:t=>Ce(t)||$e(t),focus:t=>t instanceof FocusEvent,blur:t=>t instanceof FocusEvent},nt=Symbol("colorPickerContextKey"),Xe=function(t,a,o){return[t,a*o/((t=(2-a)*o)<1?t:2-t)||0,t/2]},ol=function(t){return typeof t=="string"&&t.includes(".")&&Number.parseFloat(t)===1},al=function(t){return typeof t=="string"&&t.includes("%")},Z=function(t,a){ol(t)&&(t="100%");const o=al(t);return t=Math.min(a,Math.max(0,Number.parseFloat(`${t}`))),o&&(t=Number.parseInt(`${t*a}`,10)/100),Math.abs(t-a)<1e-6?1:t%a/Number.parseFloat(a)},Ye={10:"A",11:"B",12:"C",13:"D",14:"E",15:"F"},be=t=>{t=Math.min(Math.round(t),255);const a=Math.floor(t/16),o=t%16;return`${Ye[a]||a}${Ye[o]||o}`},Ge=function({r:t,g:a,b:o}){return Number.isNaN(+t)||Number.isNaN(+a)||Number.isNaN(+o)?"":`#${be(t)}${be(a)}${be(o)}`},Ve={A:10,B:11,C:12,D:13,E:14,F:15},X=function(t){return t.length===2?(Ve[t[0].toUpperCase()]||+t[0])*16+(Ve[t[1].toUpperCase()]||+t[1]):Ve[t[1].toUpperCase()]||+t[1]},nl=function(t,a,o){a=a/100,o=o/100;let e=a;const r=Math.max(o,.01);o*=2,a*=o<=1?o:2-o,e*=r<=1?r:2-r;const s=(o+a)/2,n=o===0?2*e/(r+e):2*a/(o+a);return{h:t,s:n*100,v:s*100}},Je=(t,a,o)=>{t=Z(t,255),a=Z(a,255),o=Z(o,255);const e=Math.max(t,a,o),r=Math.min(t,a,o);let s;const n=e,f=e-r,u=e===0?0:f/e;if(e===r)s=0;else{switch(e){case t:{s=(a-o)/f+(a<o?6:0);break}case a:{s=(o-t)/f+2;break}case o:{s=(t-a)/f+4;break}}s/=6}return{h:s*360,s:u*100,v:n*100}},se=function(t,a,o){t=Z(t,360)*6,a=Z(a,100),o=Z(o,100);const e=Math.floor(t),r=t-e,s=o*(1-a),n=o*(1-r*a),f=o*(1-(1-r)*a),u=e%6,d=[o,n,s,s,f,o][u],k=[f,o,o,n,s,s][u],p=[s,s,f,o,o,n][u];return{r:Math.round(d*255),g:Math.round(k*255),b:Math.round(p*255)}};class re{constructor(a={}){this._hue=0,this._saturation=100,this._value=100,this._alpha=100,this.enableAlpha=!1,this.format="hex",this.value="";for(const o in a)We(a,o)&&(this[o]=a[o]);a.value?this.fromString(a.value):this.doOnChange()}set(a,o){if(arguments.length===1&&typeof a=="object"){for(const e in a)We(a,e)&&this.set(e,a[e]);return}this[`_${a}`]=o,this.doOnChange()}get(a){return a==="alpha"?Math.floor(this[`_${a}`]):this[`_${a}`]}toRgb(){return se(this._hue,this._saturation,this._value)}fromString(a){if(!a){this._hue=0,this._saturation=100,this._value=100,this.doOnChange();return}const o=(e,r,s)=>{this._hue=Math.max(0,Math.min(360,e)),this._saturation=Math.max(0,Math.min(100,r)),this._value=Math.max(0,Math.min(100,s)),this.doOnChange()};if(a.includes("hsl")){const e=a.replace(/hsla|hsl|\(|\)/gm,"").split(/\s|,/g).filter(r=>r!=="").map((r,s)=>s>2?Number.parseFloat(r):Number.parseInt(r,10));if(e.length===4?this._alpha=Number.parseFloat(e[3])*100:e.length===3&&(this._alpha=100),e.length>=3){const{h:r,s,v:n}=nl(e[0],e[1],e[2]);o(r,s,n)}}else if(a.includes("hsv")){const e=a.replace(/hsva|hsv|\(|\)/gm,"").split(/\s|,/g).filter(r=>r!=="").map((r,s)=>s>2?Number.parseFloat(r):Number.parseInt(r,10));e.length===4?this._alpha=Number.parseFloat(e[3])*100:e.length===3&&(this._alpha=100),e.length>=3&&o(e[0],e[1],e[2])}else if(a.includes("rgb")){const e=a.replace(/rgba|rgb|\(|\)/gm,"").split(/\s|,/g).filter(r=>r!=="").map((r,s)=>s>2?Number.parseFloat(r):Number.parseInt(r,10));if(e.length===4?this._alpha=Number.parseFloat(e[3])*100:e.length===3&&(this._alpha=100),e.length>=3){const{h:r,s,v:n}=Je(e[0],e[1],e[2]);o(r,s,n)}}else if(a.includes("#")){const e=a.replace("#","").trim();if(!/^[0-9a-fA-F]{3}$|^[0-9a-fA-F]{6}$|^[0-9a-fA-F]{8}$/.test(e))return;let r,s,n;e.length===3?(r=X(e[0]+e[0]),s=X(e[1]+e[1]),n=X(e[2]+e[2])):(e.length===6||e.length===8)&&(r=X(e.slice(0,2)),s=X(e.slice(2,4)),n=X(e.slice(4,6))),e.length===8?this._alpha=X(e.slice(6))/255*100:(e.length===3||e.length===6)&&(this._alpha=100);const{h:f,s:u,v:d}=Je(r,s,n);o(f,u,d)}}compare(a){return Math.abs(a._hue-this._hue)<2&&Math.abs(a._saturation-this._saturation)<1&&Math.abs(a._value-this._value)<1&&Math.abs(a._alpha-this._alpha)<1}doOnChange(){const{_hue:a,_saturation:o,_value:e,_alpha:r,format:s}=this;if(this.enableAlpha)switch(s){case"hsl":{const n=Xe(a,o/100,e/100);this.value=`hsla(${a}, ${Math.round(n[1]*100)}%, ${Math.round(n[2]*100)}%, ${this.get("alpha")/100})`;break}case"hsv":{this.value=`hsva(${a}, ${Math.round(o)}%, ${Math.round(e)}%, ${this.get("alpha")/100})`;break}case"hex":{this.value=`${Ge(se(a,o,e))}${be(r*255/100)}`;break}default:{const{r:n,g:f,b:u}=se(a,o,e);this.value=`rgba(${n}, ${f}, ${u}, ${this.get("alpha")/100})`}}else switch(s){case"hsl":{const n=Xe(a,o/100,e/100);this.value=`hsl(${a}, ${Math.round(n[1]*100)}%, ${Math.round(n[2]*100)}%)`;break}case"hsv":{this.value=`hsv(${a}, ${Math.round(o)}%, ${Math.round(e)}%)`;break}case"rgb":{const{r:n,g:f,b:u}=se(a,o,e);this.value=`rgb(${n}, ${f}, ${u})`;break}default:this.value=Ge(se(a,o,e))}}}const sl=H({props:{colors:{type:Array,required:!0},color:{type:Object,required:!0},enableAlpha:{type:Boolean,required:!0}},setup(t){const a=x("color-predefine"),{currentColor:o}=Ze(nt),e=$(s(t.colors,t.color));K(()=>o.value,n=>{const f=new re;f.fromString(n),e.value.forEach(u=>{u.selected=f.compare(u)})}),bt(()=>{e.value=s(t.colors,t.color)});function r(n){t.color.fromString(t.colors[n])}function s(n,f){return n.map(u=>{const d=new re;return d.enableAlpha=t.enableAlpha,d.format="rgba",d.fromString(u),d.selected=d.value===f.value,d})}return{rgbaColors:e,handleSelect:r,ns:a}}});function rl(t,a,o,e,r,s){return C(),I("div",{class:M(t.ns.b())},[h("div",{class:M(t.ns.e("colors"))},[(C(!0),I(J,null,ie(t.rgbaColors,(n,f)=>(C(),I("div",{key:t.colors[f],class:M([t.ns.e("color-selector"),t.ns.is("alpha",n._alpha<100),{selected:n.selected}]),onClick:u=>t.handleSelect(f)},[h("div",{style:q({backgroundColor:n.value})},null,4)],10,["onClick"]))),128))],2)],2)}var il=te(sl,[["render",rl],["__file","predefine.vue"]]);const ul=H({name:"ElSlPanel",props:{color:{type:Object,required:!0}},setup(t){const a=x("color-svpanel"),o=_e(),e=$(0),r=$(0),s=$("hsl(0, 100%, 50%)"),n=A(()=>{const d=t.color.get("hue"),k=t.color.get("value");return{hue:d,value:k}});function f(){const d=t.color.get("saturation"),k=t.color.get("value"),p=o.vnode.el,{clientWidth:c,clientHeight:i}=p;r.value=d*c/100,e.value=(100-k)*i/100,s.value=`hsl(${t.color.get("hue")}, 100%, 50%)`}function u(d){const p=o.vnode.el.getBoundingClientRect(),{clientX:c,clientY:i}=Le(d);let v=c-p.left,_=i-p.top;v=Math.max(0,v),v=Math.min(v,p.width),_=Math.max(0,_),_=Math.min(_,p.height),r.value=v,e.value=_,t.color.set({saturation:v/p.width*100,value:100-_/p.height*100})}return K(()=>n.value,()=>{f()}),ee(()=>{ue(o.vnode.el,{drag:d=>{u(d)},end:d=>{u(d)}}),f()}),{cursorTop:e,cursorLeft:r,background:s,colorValue:n,handleDrag:u,update:f,ns:a}}});function cl(t,a,o,e,r,s){return C(),I("div",{class:M(t.ns.b()),style:q({backgroundColor:t.background})},[h("div",{class:M(t.ns.e("white"))},null,2),h("div",{class:M(t.ns.e("black"))},null,2),h("div",{class:M(t.ns.e("cursor")),style:q({top:t.cursorTop+"px",left:t.cursorLeft+"px"})},[h("div")],6)],6)}var dl=te(ul,[["render",cl],["__file","sv-panel.vue"]]);const fl=H({name:"ElColorPicker"}),hl=H({...fl,props:tl,emits:ll,setup(t,{expose:a,emit:o}){const e=t,{t:r}=Ae(),s=x("color"),{formItem:n}=_t(),f=yt(),u=kt(),{inputId:d,isLabeledByFormItem:k}=Ct(e,{formItemContext:n}),p=$(),c=$(),i=$(),v=$(),_=$(),m=$(),{isFocused:N,handleFocus:g,handleBlur:w}=$t(_,{beforeFocus(){return u.value},beforeBlur(b){var O;return(O=v.value)==null?void 0:O.isFocusInsideContent(b)},afterBlur(){ae(!1),ne()}});let T=!0;const E=wt(new re({enableAlpha:e.showAlpha,format:e.colorFormat||"",value:e.modelValue})),P=$(!1),L=$(!1),S=$(""),oe=A(()=>!e.modelValue&&!L.value?"transparent":rt(E,e.showAlpha)),Q=A(()=>!e.modelValue&&!L.value?"":E.value),fe=A(()=>k.value?void 0:e.ariaLabel||r("el.colorpicker.defaultLabel")),D=A(()=>k.value?n==null?void 0:n.labelId:void 0),st=A(()=>[s.b("picker"),s.is("disabled",u.value),s.bm("picker",f.value),s.is("focused",N.value)]);function rt(b,O){if(!(b instanceof re))throw new TypeError("color should be instance of _color Class");const{r:W,g:Oe,b:ze}=b.toRgb();return O?`rgba(${W}, ${Oe}, ${ze}, ${b.get("alpha")/100})`:`rgb(${W}, ${Oe}, ${ze})`}function ae(b){P.value=b}const he=zt(ae,100,{leading:!0});function Fe(){u.value||ae(!0)}function Te(){he(!1),ne()}function ne(){pe(()=>{e.modelValue?E.fromString(e.modelValue):(E.value="",pe(()=>{L.value=!1}))})}function it(){u.value||he(!P.value)}function Ue(){E.fromString(S.value)}function ut(){const b=E.value;o(Se,b),o("change",b),e.validateEvent&&(n==null||n.validate("change").catch(O=>je())),he(!1),pe(()=>{const O=new re({enableAlpha:e.showAlpha,format:e.colorFormat||"",value:e.modelValue});E.compare(O)||ne()})}function ct(){he(!1),o(Se,null),o("change",null),e.modelValue!==null&&e.validateEvent&&(n==null||n.validate("change").catch(b=>je())),ne()}function dt(){P.value&&(Te(),N.value&&Re())}function He(b){b.preventDefault(),b.stopPropagation(),ae(!1),ne()}function ft(b){switch(b.code){case Y.enter:case Y.space:b.preventDefault(),b.stopPropagation(),Fe(),m.value.focus();break;case Y.esc:He(b);break}}function Re(){_.value.focus()}function ht(){_.value.blur()}return ee(()=>{e.modelValue&&(S.value=Q.value)}),K(()=>e.modelValue,b=>{b?b&&b!==E.value&&(T=!1,E.fromString(b)):L.value=!1}),K(()=>Q.value,b=>{S.value=b,T&&o("activeChange",b),T=!0}),K(()=>E.value,()=>{!e.modelValue&&!L.value&&(L.value=!0)}),K(()=>P.value,()=>{pe(()=>{var b,O,W;(b=p.value)==null||b.update(),(O=c.value)==null||O.update(),(W=i.value)==null||W.update()})}),xe(nt,{currentColor:Q}),a({color:E,show:Fe,hide:Te,focus:Re,blur:ht}),(b,O)=>(C(),U(l(Rt),{ref_key:"popper",ref:v,visible:P.value,"show-arrow":!1,"fallback-placements":["bottom","top","right","left"],offset:0,"gpu-acceleration":!1,"popper-class":[l(s).be("picker","panel"),l(s).b("dropdown"),b.popperClass],"stop-popper-mouse-event":!1,effect:"light",trigger:"click",teleported:b.teleported,transition:`${l(s).namespace.value}-zoom-in-top`,persistent:"",onHide:W=>ae(!1)},{content:V(()=>[ge((C(),I("div",{onKeydown:qe(He,["esc"])},[h("div",{class:M(l(s).be("dropdown","main-wrapper"))},[y(el,{ref_key:"hue",ref:p,class:"hue-slider",color:l(E),vertical:""},null,8,["color"]),y(dl,{ref_key:"sv",ref:c,color:l(E)},null,8,["color"])],2),b.showAlpha?(C(),U(Qt,{key:0,ref_key:"alpha",ref:i,color:l(E)},null,8,["color"])):R("v-if",!0),b.predefine?(C(),U(il,{key:1,ref:"predefine","enable-alpha":b.showAlpha,color:l(E),colors:b.predefine},null,8,["enable-alpha","color","colors"])):R("v-if",!0),h("div",{class:M(l(s).be("dropdown","btns"))},[h("span",{class:M(l(s).be("dropdown","value"))},[y(l(de),{ref_key:"inputRef",ref:m,modelValue:S.value,"onUpdate:modelValue":W=>S.value=W,"validate-event":!1,size:"small",onKeyup:qe(Ue,["enter"]),onBlur:Ue},null,8,["modelValue","onUpdate:modelValue","onKeyup"])],2),y(l(j),{class:M(l(s).be("dropdown","link-btn")),text:"",size:"small",onClick:ct},{default:V(()=>[F(z(l(r)("el.colorpicker.clear")),1)]),_:1},8,["class"]),y(l(j),{plain:"",size:"small",class:M(l(s).be("dropdown","btn")),onClick:ut},{default:V(()=>[F(z(l(r)("el.colorpicker.confirm")),1)]),_:1},8,["class"])],2)],40,["onKeydown"])),[[l(Kt),dt]])]),default:V(()=>[h("div",et({id:l(d),ref_key:"triggerRef",ref:_},b.$attrs,{class:l(st),role:"button","aria-label":l(fe),"aria-labelledby":l(D),"aria-description":l(r)("el.colorpicker.description",{color:b.modelValue||""}),"aria-disabled":l(u),tabindex:l(u)?-1:b.tabindex,onKeydown:ft,onFocus:l(g),onBlur:l(w)}),[l(u)?(C(),I("div",{key:0,class:M(l(s).be("picker","mask"))},null,2)):R("v-if",!0),h("div",{class:M(l(s).be("picker","trigger")),onClick:it},[h("span",{class:M([l(s).be("picker","color"),l(s).is("alpha",b.showAlpha)])},[h("span",{class:M(l(s).be("picker","color-inner")),style:q({backgroundColor:l(oe)})},[ge(y(l(Ee),{class:M([l(s).be("picker","icon"),l(s).is("icon-arrow-down")])},{default:V(()=>[y(l(Vt))]),_:1},8,["class"]),[[Pe,b.modelValue||L.value]]),ge(y(l(Ee),{class:M([l(s).be("picker","empty"),l(s).is("icon-close")])},{default:V(()=>[y(l(tt))]),_:1},8,["class"]),[[Pe,!b.modelValue&&!L.value]])],6)],2)],2)],16,["id","aria-label","aria-labelledby","aria-description","aria-disabled","tabindex","onFocus","onBlur"])]),_:1},8,["visible","popper-class","teleported","transition","onHide"]))}});var pl=te(hl,[["__file","color-picker.vue"]]);const vl=lt(pl),ml=Ne({...Mt,direction:{type:String,default:"rtl",values:["ltr","rtl","ttb","btt"]},size:{type:[String,Number],default:"30%"},withHeader:{type:Boolean,default:!0},modalFade:{type:Boolean,default:!0},headerAriaLevel:{type:String,default:"2"}}),gl=St,bl=H({name:"ElDrawer",inheritAttrs:!1}),_l=H({...bl,props:ml,emits:gl,setup(t,{expose:a}){const o=t,e=Et();Pt({scope:"el-drawer",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/drawer.html#slots"},A(()=>!!e.title));const r=$(),s=$(),n=x("drawer"),{t:f}=Ae(),{afterEnter:u,afterLeave:d,beforeLeave:k,visible:p,rendered:c,titleId:i,bodyId:v,zIndex:_,onModalClick:m,onOpenAutoFocus:N,onCloseAutoFocus:g,onFocusoutPrevented:w,onCloseRequested:T,handleClose:E}=Dt(o,r),P=A(()=>o.direction==="rtl"||o.direction==="ltr"),L=A(()=>Me(o.size));return a({handleClose:E,afterEnter:u,afterLeave:d}),(S,oe)=>(C(),U(l(Bt),{to:S.appendTo,disabled:S.appendTo!=="body"?!1:!S.appendToBody},{default:V(()=>[y(Nt,{name:l(n).b("fade"),onAfterEnter:l(u),onAfterLeave:l(d),onBeforeLeave:l(k),persisted:""},{default:V(()=>[ge(y(l(At),{mask:S.modal,"overlay-class":S.modalClass,"z-index":l(_),onClick:l(m)},{default:V(()=>[y(l(It),{loop:"",trapped:l(p),"focus-trap-el":r.value,"focus-start-el":s.value,onFocusAfterTrapped:l(N),onFocusAfterReleased:l(g),onFocusoutPrevented:l(w),onReleaseRequested:l(T)},{default:V(()=>[h("div",et({ref_key:"drawerRef",ref:r,"aria-modal":"true","aria-label":S.title||void 0,"aria-labelledby":S.title?void 0:l(i),"aria-describedby":l(v)},S.$attrs,{class:[l(n).b(),S.direction,l(p)&&"open"],style:l(P)?"width: "+l(L):"height: "+l(L),role:"dialog",onClick:ot(()=>{},["stop"])}),[h("span",{ref_key:"focusStartRef",ref:s,class:M(l(n).e("sr-focus")),tabindex:"-1"},null,2),S.withHeader?(C(),I("header",{key:0,class:M(l(n).e("header"))},[S.$slots.title?ve(S.$slots,"title",{key:1},()=>[R(" DEPRECATED SLOT ")]):ve(S.$slots,"header",{key:0,close:l(E),titleId:l(i),titleClass:l(n).e("title")},()=>[S.$slots.title?R("v-if",!0):(C(),I("span",{key:0,id:l(i),role:"heading","aria-level":S.headerAriaLevel,class:M(l(n).e("title"))},z(S.title),11,["id","aria-level"]))]),S.showClose?(C(),I("button",{key:2,"aria-label":l(f)("el.drawer.close"),class:M(l(n).e("close-btn")),type:"button",onClick:l(E)},[y(l(Ee),{class:M(l(n).e("close"))},{default:V(()=>[y(l(tt))]),_:1},8,["class"])],10,["aria-label","onClick"])):R("v-if",!0)],2)):R("v-if",!0),l(c)?(C(),I("div",{key:1,id:l(v),class:M(l(n).e("body"))},[ve(S.$slots,"default")],10,["id"])):R("v-if",!0),S.$slots.footer?(C(),I("div",{key:2,class:M(l(n).e("footer"))},[ve(S.$slots,"footer")],2)):R("v-if",!0)],16,["aria-label","aria-labelledby","aria-describedby","onClick"])]),_:3},8,["trapped","focus-trap-el","focus-start-el","onFocusAfterTrapped","onFocusAfterReleased","onFocusoutPrevented","onReleaseRequested"])]),_:3},8,["mask","overlay-class","z-index","onClick"]),[[Pe,l(p)]])]),_:3},8,["name","onAfterEnter","onAfterLeave","onBeforeLeave"])]),_:3},8,["to","disabled"]))}});var yl=te(_l,[["__file","drawer.vue"]]);const kl=lt(yl),ce={async getProfile(){return(await De.get("/user")).data},async updateUser(t){return(await De.put("/user",t)).data}},Cl={async getImages(){return(await De.get("/image")).data}},$l={class:"imageList"},wl=["onClick"],Vl={class:"shortcutList"},Ml=H({__name:"CategoryDetailDialog",props:{isVisible:Boolean,category:{type:Object,required:!0}},emits:["update:isVisible"],setup(t,{emit:a}){const o=t,e=a,r=Ie(),s=Ze("images"),n=$(ye.cloneDeep(o.category)),f=["#ff4500","#ff8c00","#ffd700"],u=A({get:()=>o.isVisible,set:c=>e("update:isVisible",c)});function d(c){G.shortcutDelete({categoryId:n.value.id,shortcutId:c}).then(()=>{p();const{shortcuts:i}=n.value;if(i){const v=i.findIndex(_=>_.id===c);v!==-1&&i.splice(v,1)}})}async function k(){const{id:c,name:i,color:v,imageId:_}=n.value;try{await Promise.all([G.categoryUpdate(c,{name:i,color:v,imageId:_}),G.shortcutUpdate(c,n.value.shortcuts)])}catch(m){console.log(m,"err")}finally{p(),e("update:isVisible",!1)}}function p(){G.categoryList().then(c=>{r.setCategories(c)})}return(c,i)=>{const v=de,_=vl,m=j,N=ke;return C(),U(N,{modelValue:l(u),"onUpdate:modelValue":i[5]||(i[5]=g=>B(u)?u.value=g:null),title:"編輯分類",fullscreen:""},{footer:V(()=>[h("div",null,[y(m,{onClick:i[3]||(i[3]=g=>e("update:isVisible",!1))},{default:V(()=>[F("cancel")]),_:1}),y(m,{onClick:i[4]||(i[4]=g=>k())},{default:V(()=>[F("submit")]),_:1})])]),default:V(()=>[h("div",null,[y(v,{modelValue:l(n).name,"onUpdate:modelValue":i[0]||(i[0]=g=>l(n).name=g)},null,8,["modelValue"]),y(_,{modelValue:l(n).color,"onUpdate:modelValue":i[1]||(i[1]=g=>l(n).color=g),"show-alpha":"",predefine:f},null,8,["modelValue"]),h("div",$l,[(C(!0),I(J,null,ie(l(s),g=>(C(),I("div",{class:M(["imageBox",{active:g.id===l(n).imageId}]),key:g.id,style:q({backgroundImage:`url(${g.url})`}),onClick:w=>l(n).imageId=g.id},null,14,wl))),128))]),h("div",Vl,[(C(!0),I(J,null,ie(l(n).shortcuts,(g,w)=>(C(),I("div",{class:"shortcutItem",key:g.id},[y(v,{modelValue:g.name,"onUpdate:modelValue":T=>g.name=T},null,8,["modelValue","onUpdate:modelValue"]),g.id?(C(),U(m,{key:0,type:"danger",onClick:T=>d(g.id)},{default:V(()=>[F("delete")]),_:2},1032,["onClick"])):(C(),U(m,{key:1,onClick:T=>{var E;return(E=l(n).shortcuts)==null?void 0:E.splice(w,1)}},{default:V(()=>[F("delete")]),_:2},1032,["onClick"]))]))),128)),y(m,{onClick:i[2]||(i[2]=g=>l(n).shortcuts.push({name:""}))},{default:V(()=>[F("add")]),_:1})])])]),_:1},8,["modelValue"])}}}),Sl=Be(Ml,[["__scopeId","data-v-c6f3d766"]]),El=["onClick"],Pl=H({__name:"CategoryDrawer",props:{isVisible:Boolean},emits:["update:isVisible","getProfile"],setup(t,{emit:a}){const o=t,e=a,r=Ie(),{categories:s}=at(r);let n=$(!1);const f=$(),u=$();let d=$("");const k=A({get:()=>o.isVisible,set:m=>e("update:isVisible",m)});function p(m){n.value=!0,f.value=m}function c(){G.categoryCreate({name:d.value}).then(()=>{v(),d.value=""})}function i(m){G.categoryDelete(m).then(()=>{v()})}function v(){G.categoryList().then(m=>{r.setCategories(m)})}function _(){Cl.getImages().then(m=>{u.value=m}).catch(m=>{}).finally(()=>{})}return ee(()=>{_()}),xe("images",u),(m,N)=>{const g=de,w=j,T=kl,E=Sl;return C(),I(J,null,[y(T,{modelValue:l(k),"onUpdate:modelValue":N[2]||(N[2]=P=>B(k)?k.value=P:null),title:"編輯分類",direction:"btt",size:"100%"},{default:V(()=>[y(g,{modelValue:l(d),"onUpdate:modelValue":N[0]||(N[0]=P=>B(d)?d.value=P:d=P)},null,8,["modelValue"]),y(w,{onClick:N[1]||(N[1]=P=>c())},{default:V(()=>[F("add category")]),_:1}),(C(!0),I(J,null,ie(l(s),P=>{var L;return C(),I("div",{class:"item",key:P.id,onClick:S=>p(P)},[h("div",null,[F(z(P.name)+" ",1),h("span",null,z((L=P.shortcuts)==null?void 0:L.length)+" 個子項目",1)]),h("div",null,[y(w,{type:"danger",onClick:ot(S=>i(P.id),["stop"])},{default:V(()=>[F("delete")]),_:2},1032,["onClick"])])],8,El)}),128))]),_:1},8,["modelValue"]),l(n)?(C(),U(E,{key:0,isVisible:l(n),"onUpdate:isVisible":N[3]||(N[3]=P=>B(n)?n.value=P:n=P),category:l(f)},null,8,["isVisible","category"])):R("",!0)],64)}}}),Dl=Be(Pl,[["__scopeId","data-v-fce82b73"]]),Nl={class:"langList"},Al=["onClick"],Il=H({__name:"LangDialog",props:{isVisible:Boolean,lang:String},emits:["update:isVisible","getProfile"],setup(t,{emit:a}){const o=t,e=a;let r=$(ye.cloneDeep(o.lang));const s=["zh-TW","zh-CN","en-US","ja-JP"],n=A({get:()=>o.isVisible,set:u=>e("update:isVisible",u)});function f(){ce.updateUser({lang:r.value}).then(u=>{console.log(u)}).catch(u=>{}).finally(()=>{e("update:isVisible",!1),e("getProfile")})}return(u,d)=>{const k=j,p=ke;return C(),U(p,{modelValue:l(n),"onUpdate:modelValue":d[2]||(d[2]=c=>B(n)?n.value=c:null),title:"修改語系",width:"90%"},{footer:V(()=>[h("div",null,[y(k,{onClick:d[0]||(d[0]=c=>e("update:isVisible",!1))},{default:V(()=>[F("cancel")]),_:1}),y(k,{onClick:d[1]||(d[1]=c=>f())},{default:V(()=>[F("submit")]),_:1})])]),default:V(()=>[h("div",Nl,[(C(),I(J,null,ie(s,c=>h("div",{key:c,class:M({active:c===l(r)}),onClick:i=>B(r)?r.value=c:r=c},z(c),11,Al)),64))])]),_:1},8,["modelValue"])}}}),Bl=H({__name:"MonthlyBudgetDialog",props:{isVisible:Boolean,monthlyBudget:Number},emits:["update:isVisible","getProfile"],setup(t,{emit:a}){const o=t,e=a;let r=$(ye.cloneDeep(o.monthlyBudget));const s=A({get:()=>o.isVisible,set:f=>e("update:isVisible",f)});function n(){ce.updateUser({monthlyBudget:r.value}).then(f=>{console.log(f)}).catch(f=>{}).finally(()=>{e("update:isVisible",!1),e("getProfile")})}return(f,u)=>{const d=de,k=j,p=ke;return C(),U(p,{modelValue:l(s),"onUpdate:modelValue":u[3]||(u[3]=c=>B(s)?s.value=c:null),title:"修改預算",width:"90%"},{footer:V(()=>[h("div",null,[y(k,{onClick:u[1]||(u[1]=c=>e("update:isVisible",!1))},{default:V(()=>[F("cancel")]),_:1}),y(k,{onClick:u[2]||(u[2]=c=>n())},{default:V(()=>[F("submit")]),_:1})])]),default:V(()=>[h("div",null,[y(d,{modelValue:l(r),"onUpdate:modelValue":u[0]||(u[0]=c=>B(r)?r.value=c:r=c),modelModifiers:{number:!0},type:"number"},null,8,["modelValue"])])]),_:1},8,["modelValue"])}}}),Ll=H({__name:"NameDialog",props:{isVisible:Boolean,userName:String},emits:["update:isVisible","getProfile"],setup(t,{emit:a}){const o=t,e=a;let r=$(ye.cloneDeep(o.userName));const s=A({get:()=>o.isVisible,set:f=>e("update:isVisible",f)});function n(){ce.updateUser({name:r.value}).then(f=>{console.log(f)}).catch(f=>{}).finally(()=>{e("update:isVisible",!1),e("getProfile")})}return(f,u)=>{const d=de,k=j,p=ke;return C(),U(p,{modelValue:l(s),"onUpdate:modelValue":u[3]||(u[3]=c=>B(s)?s.value=c:null),title:"修改暱稱",width:"90%"},{footer:V(()=>[h("div",null,[y(k,{onClick:u[1]||(u[1]=c=>e("update:isVisible",!1))},{default:V(()=>[F("cancel")]),_:1}),y(k,{onClick:u[2]||(u[2]=c=>n())},{default:V(()=>[F("submit")]),_:1})])]),default:V(()=>[h("div",null,[y(d,{modelValue:l(r),"onUpdate:modelValue":u[0]||(u[0]=c=>B(r)?r.value=c:r=c)},null,8,["modelValue"])])]),_:1},8,["modelValue"])}}}),le=t=>(Tt("data-v-ac57794f"),t=t(),Ut(),t),Fl={class:"setting content"},Tl={class:"card"},Ul=le(()=>h("div",null,"暱稱",-1)),Hl=le(()=>h("div",null,"預算",-1)),Rl=le(()=>h("div",null,"語系",-1)),Ol=le(()=>h("div",null,"分類",-1)),zl={class:"item"},Kl=le(()=>h("div",null,"主題",-1)),Wl={class:"item"},ql=le(()=>h("div",null,"登出",-1)),jl=H({__name:"Index",setup(t){const a=Lt(),o=$({theme:"light"});let e=$(!1),r=$(!1),s=$(!1),n=$(!1);const f=Ie(),{categories:u}=at(f);function d(){ce.getProfile().then(c=>{o.value=c})}function k(c){ce.updateUser({theme:c}).then(i=>{console.log(i)}).catch(i=>{}).finally(()=>{d()})}function p(){a.push({name:"Login"})}return ee(()=>{d()}),(c,i)=>{var P,L,S,oe,Q,fe;const v=Ot,_=Ft("inline-svg"),m=Wt,N=j,g=Ll,w=Bl,T=Il,E=Dl;return C(),I(J,null,[y(v,{title:"Setting"}),h("div",Fl,[h("div",Tl,[h("div",{class:"item",onClick:i[0]||(i[0]=D=>B(e)?e.value=!0:e=!0)},[Ul,h("div",null,[h("span",null,z((P=l(o))==null?void 0:P.userName),1),y(_,{src:l(me),height:"18",width:"18"},null,8,["src"])])]),h("div",{class:"item",onClick:i[1]||(i[1]=D=>B(r)?r.value=!0:r=!0)},[Hl,h("div",null,[h("span",null,z((L=l(o))==null?void 0:L.monthlyBudget),1),y(_,{src:l(me),height:"18",width:"18"},null,8,["src"])])]),h("div",{class:"item",onClick:i[2]||(i[2]=D=>B(s)?s.value=!0:s=!0)},[Rl,h("div",null,[h("span",null,z((S=l(o))==null?void 0:S.lang),1),y(_,{src:l(me),height:"18",width:"18"},null,8,["src"])])]),h("div",{class:"item",onClick:i[3]||(i[3]=D=>B(n)?n.value=!0:n=!0)},[Ol,h("div",null,[h("span",null,z(l(u).length)+" 個項目",1),y(_,{src:l(me),height:"18",width:"18"},null,8,["src"])])]),h("div",zl,[Kl,h("div",null,[y(m,{modelValue:l(o).theme,"onUpdate:modelValue":i[4]||(i[4]=D=>l(o).theme=D),"active-value":"dark","inactive-value":"light",onChange:k},null,8,["modelValue"])])]),h("div",Wl,[ql,y(N,{onClick:i[5]||(i[5]=D=>p())},{default:V(()=>[F("登出")]),_:1})])])]),l(e)?(C(),U(g,{key:0,isVisible:l(e),"onUpdate:isVisible":i[6]||(i[6]=D=>B(e)?e.value=D:e=D),userName:(oe=l(o))==null?void 0:oe.userName,onGetProfile:i[7]||(i[7]=D=>d())},null,8,["isVisible","userName"])):R("",!0),l(r)?(C(),U(w,{key:1,isVisible:l(r),"onUpdate:isVisible":i[8]||(i[8]=D=>B(r)?r.value=D:r=D),monthlyBudget:(Q=l(o))==null?void 0:Q.monthlyBudget,onGetProfile:i[9]||(i[9]=D=>d())},null,8,["isVisible","monthlyBudget"])):R("",!0),l(s)?(C(),U(T,{key:2,isVisible:l(s),"onUpdate:isVisible":i[10]||(i[10]=D=>B(s)?s.value=D:s=D),lang:(fe=l(o))==null?void 0:fe.lang,onGetProfile:i[11]||(i[11]=D=>d())},null,8,["isVisible","lang"])):R("",!0),l(n)?(C(),U(E,{key:3,isVisible:l(n),"onUpdate:isVisible":i[12]||(i[12]=D=>B(n)?n.value=D:n=D),onGetProfile:i[13]||(i[13]=D=>d())},null,8,["isVisible"])):R("",!0)],64)}}}),Zl=Be(jl,[["__scopeId","data-v-ac57794f"]]);export{Zl as default};
