import{aC as j,d as U,a as h,bH as $,h as x,l as V,m as k,w as _,J as n,a3 as p,x as y,q as H,am as K,s as O,u as i,ao as f,t as N,al as J,N as w,ap as S,P as R,o as Q,v as P,bI as X,a1 as Y,aj as Z,ak as ee,ai as te}from"./index-BbzcA3uL.js";import{E as le}from"./el-switch-D79U-f7X.js";import{_ as ne}from"./Header-BUkIDTF1.js";import{r as D}from"./right-BVvKSUIh.js";import"./validator-FCyz5Ub-.js";const C={async getProfile(){return(await j.get("/user")).data},async updateUser(g){return(await j.put("/user",g)).data}},oe={class:"langList"},se=["onClick"],ie=U({__name:"LangDialog",props:{isVisible:Boolean,lang:String},emits:["update:isVisible","getProfile"],setup(g,{emit:v}){const a=g,s=v;let l=h($.cloneDeep(a.lang));const u=["zh-TW","zh-CN","en-US","ja-JP"],c=x({get:()=>a.isVisible,set:o=>s("update:isVisible",o)});function r(){C.updateUser({lang:l.value}).then(o=>{console.log(o)}).catch(o=>{}).finally(()=>{s("update:isVisible",!1),s("getProfile")})}return(o,m)=>{const e=w,b=S;return V(),k(b,{modelValue:i(c),"onUpdate:modelValue":m[2]||(m[2]=t=>f(c)?c.value=t:null),title:"修改語系",width:"90%"},{footer:_(()=>[n("div",null,[p(e,{onClick:m[0]||(m[0]=t=>s("update:isVisible",!1))},{default:_(()=>[y("cancel")]),_:1}),p(e,{onClick:m[1]||(m[1]=t=>r())},{default:_(()=>[y("submit")]),_:1})])]),default:_(()=>[n("div",oe,[(V(),H(J,null,K(u,t=>n("div",{key:t,class:O({active:t===i(l)}),onClick:M=>f(l)?l.value=t:l=t},N(t),11,se)),64))])]),_:1},8,["modelValue"])}}}),ae=U({__name:"MonthlyBudgetDialog",props:{isVisible:Boolean,monthlyBudget:Number},emits:["update:isVisible","getProfile"],setup(g,{emit:v}){const a=g,s=v;let l=h($.cloneDeep(a.monthlyBudget));const u=x({get:()=>a.isVisible,set:r=>s("update:isVisible",r)});function c(){C.updateUser({monthlyBudget:l.value}).then(r=>{console.log(r)}).catch(r=>{}).finally(()=>{s("update:isVisible",!1),s("getProfile")})}return(r,o)=>{const m=R,e=w,b=S;return V(),k(b,{modelValue:i(u),"onUpdate:modelValue":o[3]||(o[3]=t=>f(u)?u.value=t:null),title:"修改預算",width:"90%"},{footer:_(()=>[n("div",null,[p(e,{onClick:o[1]||(o[1]=t=>s("update:isVisible",!1))},{default:_(()=>[y("cancel")]),_:1}),p(e,{onClick:o[2]||(o[2]=t=>c())},{default:_(()=>[y("submit")]),_:1})])]),default:_(()=>[n("div",null,[p(m,{modelValue:i(l),"onUpdate:modelValue":o[0]||(o[0]=t=>f(l)?l.value=t:l=t),modelModifiers:{number:!0},type:"number"},null,8,["modelValue"])])]),_:1},8,["modelValue"])}}}),ue=U({__name:"NameDialog",props:{isVisible:Boolean,userName:String},emits:["update:isVisible","getProfile"],setup(g,{emit:v}){const a=g,s=v;let l=h($.cloneDeep(a.userName));const u=x({get:()=>a.isVisible,set:r=>s("update:isVisible",r)});function c(){C.updateUser({name:l.value}).then(r=>{console.log(r)}).catch(r=>{}).finally(()=>{s("update:isVisible",!1),s("getProfile")})}return(r,o)=>{const m=R,e=w,b=S;return V(),k(b,{modelValue:i(u),"onUpdate:modelValue":o[3]||(o[3]=t=>f(u)?u.value=t:null),title:"修改暱稱",width:"90%"},{footer:_(()=>[n("div",null,[p(e,{onClick:o[1]||(o[1]=t=>s("update:isVisible",!1))},{default:_(()=>[y("cancel")]),_:1}),p(e,{onClick:o[2]||(o[2]=t=>c())},{default:_(()=>[y("submit")]),_:1})])]),default:_(()=>[n("div",null,[p(m,{modelValue:i(l),"onUpdate:modelValue":o[0]||(o[0]=t=>f(l)?l.value=t:l=t)},null,8,["modelValue"])])]),_:1},8,["modelValue"])}}}),B=g=>(Z("data-v-5877d130"),g=g(),ee(),g),de={class:"setting content"},re={class:"card"},me=B(()=>n("div",null,"暱稱",-1)),pe=B(()=>n("div",null,"預算",-1)),ge=B(()=>n("div",null,"語系",-1)),ce={class:"item"},_e=B(()=>n("div",null,"主題",-1)),fe={class:"item"},ve=B(()=>n("div",null,"登出",-1)),Ve=U({__name:"Index",setup(g){const v=X(),a=h({theme:"light"});let s=h(!1),l=h(!1),u=h(!1);function c(){C.getProfile().then(m=>{a.value=m})}function r(m){C.updateUser({theme:m}).then(e=>{console.log(e)}).catch(e=>{}).finally(()=>{c()})}function o(){v.push({name:"Login"})}return Q(()=>{c()}),(m,e)=>{var I,E,L,z,G,T;const b=ne,t=Y("inline-svg"),M=le,q=w,A=ue,F=ae,W=ie;return V(),H(J,null,[p(b,{title:"Setting"}),n("div",de,[n("div",re,[n("div",{class:"item",onClick:e[0]||(e[0]=d=>f(s)?s.value=!0:s=!0)},[me,n("div",null,[n("span",null,N((I=i(a))==null?void 0:I.userName),1),p(t,{src:i(D),height:"18",width:"18"},null,8,["src"])])]),n("div",{class:"item",onClick:e[1]||(e[1]=d=>f(l)?l.value=!0:l=!0)},[pe,n("div",null,[n("span",null,N((E=i(a))==null?void 0:E.monthlyBudget),1),p(t,{src:i(D),height:"18",width:"18"},null,8,["src"])])]),n("div",{class:"item",onClick:e[2]||(e[2]=d=>f(u)?u.value=!0:u=!0)},[ge,n("div",null,[n("span",null,N((L=i(a))==null?void 0:L.lang),1),p(t,{src:i(D),height:"18",width:"18"},null,8,["src"])])]),n("div",ce,[_e,n("div",null,[p(M,{modelValue:i(a).theme,"onUpdate:modelValue":e[3]||(e[3]=d=>i(a).theme=d),"active-value":"dark","inactive-value":"light",onChange:r},null,8,["modelValue"])])]),n("div",fe,[ve,p(q,{onClick:e[4]||(e[4]=d=>o())},{default:_(()=>[y("登出")]),_:1})])])]),i(s)?(V(),k(A,{key:0,isVisible:i(s),"onUpdate:isVisible":e[5]||(e[5]=d=>f(s)?s.value=d:s=d),userName:(z=i(a))==null?void 0:z.userName,onGetProfile:e[6]||(e[6]=d=>c())},null,8,["isVisible","userName"])):P("",!0),i(l)?(V(),k(F,{key:1,isVisible:i(l),"onUpdate:isVisible":e[7]||(e[7]=d=>f(l)?l.value=d:l=d),monthlyBudget:(G=i(a))==null?void 0:G.monthlyBudget,onGetProfile:e[8]||(e[8]=d=>c())},null,8,["isVisible","monthlyBudget"])):P("",!0),i(u)?(V(),k(W,{key:2,isVisible:i(u),"onUpdate:isVisible":e[9]||(e[9]=d=>f(u)?u.value=d:u=d),lang:(T=i(a))==null?void 0:T.lang,onGetProfile:e[10]||(e[10]=d=>c())},null,8,["isVisible","lang"])):P("",!0)],64)}}}),Be=te(Ve,[["__scopeId","data-v-5877d130"]]);export{Be as default};
